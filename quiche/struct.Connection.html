<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `Connection` struct in crate `quiche`."><meta name="keywords" content="rust, rustlang, rust-lang, Connection"><title>quiche::Connection - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../quiche/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Struct Connection</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.application_proto">application_proto</a><a href="#method.close">close</a><a href="#method.is_closed">is_closed</a><a href="#method.is_established">is_established</a><a href="#method.is_in_early_data">is_in_early_data</a><a href="#method.is_resumed">is_resumed</a><a href="#method.on_timeout">on_timeout</a><a href="#method.peer_cert">peer_cert</a><a href="#method.readable">readable</a><a href="#method.recv">recv</a><a href="#method.send">send</a><a href="#method.stats">stats</a><a href="#method.stream_application_data">stream_application_data</a><a href="#method.stream_capacity">stream_capacity</a><a href="#method.stream_finished">stream_finished</a><a href="#method.stream_init_application_data">stream_init_application_data</a><a href="#method.stream_recv">stream_recv</a><a href="#method.stream_send">stream_send</a><a href="#method.stream_shutdown">stream_shutdown</a><a href="#method.timeout">timeout</a><a href="#method.trace_id">trace_id</a><a href="#method.writable">writable</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a><a href="#impl-Send">Send</a><a href="#impl-Sync">!Sync</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">!UnwindSafe</a></div><a class="sidebar-title" href="#blanket-implementations">Blanket Implementations</a><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></div></div><p class='location'><a href='index.html'>quiche</a></p><script>window.sidebarCurrent = {name: 'Connection', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/quiche/lib.rs.html#728-862' title='goto source code'>[src]</a></span><span class='in-band'>Struct <a href='index.html'>quiche</a>::<wbr><a class="struct" href=''>Connection</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust struct'>pub struct Connection { /* fields omitted */ }</pre></div><div class='docblock'><p>A QUIC connection.</p>
</div><h2 id='methods' class='small-section-header'>Methods<a href='#methods' class='anchor'></a></h2><h3 id='impl' class='impl'><code class='in-band'>impl <a class="struct" href="../quiche/struct.Connection.html" title="struct quiche::Connection">Connection</a></code><a href='#impl' class='anchor'></a><a class='srclink' href='../src/quiche/lib.rs.html#1056-3414' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.recv' class="method"><code id='recv.v'>pub fn <a href='#method.recv' class='fnname'>recv</a>(&amp;mut self, buf: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="type" href="../quiche/type.Result.html" title="type quiche::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#1281-1318' title='goto source code'>[src]</a></h4><div class='docblock'><p>Processes QUIC packets received from the peer.</p>
<p>On success the number of bytes processed from the input buffer is
returned. On error the connection will be closed by calling <a href="struct.Connection.html#method.close"><code>close()</code></a>
with the appropriate error code.</p>
<p>Coalesced packets will be processed as necessary.</p>
<p>Note that the contents of the input buffer <code>buf</code> might be modified by
this function due to, for example, in-place decryption.</p>
<h2 id="examples" class="section-header"><a href="#examples">Examples:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">loop</span> {
    <span class="kw">let</span> <span class="ident">read</span> <span class="op">=</span> <span class="ident">socket</span>.<span class="ident">recv</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">buf</span>).<span class="ident">unwrap</span>();

    <span class="kw">let</span> <span class="ident">read</span> <span class="op">=</span> <span class="kw">match</span> <span class="ident">conn</span>.<span class="ident">recv</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">buf</span>[..<span class="ident">read</span>]) {
        <span class="prelude-val">Ok</span>(<span class="ident">v</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">v</span>,

        <span class="prelude-val">Err</span>(<span class="ident">e</span>) <span class="op">=</span><span class="op">&gt;</span> {
            <span class="comment">// An error occurred, handle it.</span>
            <span class="kw">break</span>;
        },
    };
}</pre></div>
</div><h4 id='method.send' class="method"><code id='send.v'>pub fn <a href='#method.send' class='fnname'>send</a>(&amp;mut self, out: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="type" href="../quiche/type.Result.html" title="type quiche::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#1798-2386' title='goto source code'>[src]</a></h4><div class='docblock'><p>Writes a single QUIC packet to be sent to the peer.</p>
<p>On success the number of bytes written to the output buffer is
returned, or <a href="enum.Error.html#variant.Done"><code>Done</code></a> if there was nothing to write.</p>
<p>The application should call <code>send()</code> multiple times until <a href="enum.Error.html#variant.Done"><code>Done</code></a> is
returned, indicating that there are no more packets to send. It is
recommended that <code>send()</code> be called in the following cases:</p>
<ul>
<li>
<p>When the application receives QUIC packets from the peer (that is,
any time <a href="struct.Connection.html#method.recv"><code>recv()</code></a> is also called).</p>
</li>
<li>
<p>When the connection timer expires (that is, any time <a href="struct.Connection.html#method.on_timeout"><code>on_timeout()</code></a>
is also called).</p>
</li>
<li>
<p>When the application sends data to the peer (for examples, any time
<a href="struct.Connection.html#method.stream_send"><code>stream_send()</code></a> or <a href="struct.Connection.html#method.stream_shutdown"><code>stream_shutdown()</code></a> are called).</p>
</li>
</ul>
<h2 id="examples-1" class="section-header"><a href="#examples-1">Examples:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">loop</span> {
    <span class="kw">let</span> <span class="ident">write</span> <span class="op">=</span> <span class="kw">match</span> <span class="ident">conn</span>.<span class="ident">send</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">out</span>) {
        <span class="prelude-val">Ok</span>(<span class="ident">v</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">v</span>,

        <span class="prelude-val">Err</span>(<span class="ident">quiche</span>::<span class="ident">Error</span>::<span class="ident">Done</span>) <span class="op">=</span><span class="op">&gt;</span> {
            <span class="comment">// Done writing.</span>
            <span class="kw">break</span>;
        },

        <span class="prelude-val">Err</span>(<span class="ident">e</span>) <span class="op">=</span><span class="op">&gt;</span> {
            <span class="comment">// An error occurred, handle it.</span>
            <span class="kw">break</span>;
        },
    };

    <span class="ident">socket</span>.<span class="ident">send</span>(<span class="kw-2">&amp;</span><span class="ident">out</span>[..<span class="ident">write</span>]).<span class="ident">unwrap</span>();
}</pre></div>
</div><h4 id='method.stream_recv' class="method"><code id='stream_recv.v'>pub fn <a href='#method.stream_recv' class='fnname'>stream_recv</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;stream_id: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;out: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a><br>) -&gt; <a class="type" href="../quiche/type.Result.html" title="type quiche::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">)</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#2412-2469' title='goto source code'>[src]</a></h4><div class='docblock'><p>Reads contiguous data from a stream into the provided slice.</p>
<p>The slice must be sized by the caller and will be populated up to its
capacity.</p>
<p>On success the amount of bytes read and a flag indicating the fin state
is returned as a tuple, or <a href="enum.Error.html#variant.Done"><code>Done</code></a> if there is no data to read.</p>
<h2 id="examples-2" class="section-header"><a href="#examples-2">Examples:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">while</span> <span class="kw">let</span> <span class="prelude-val">Ok</span>((<span class="ident">read</span>, <span class="ident">fin</span>)) <span class="op">=</span> <span class="ident">conn</span>.<span class="ident">stream_recv</span>(<span class="ident">stream_id</span>, <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">buf</span>) {
    <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Got {} bytes on stream {}&quot;</span>, <span class="ident">read</span>, <span class="ident">stream_id</span>);
}</pre></div>
</div><h4 id='method.stream_send' class="method"><code id='stream_send.v'>pub fn <a href='#method.stream_send' class='fnname'>stream_send</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;stream_id: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;buf: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;fin: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a><br>) -&gt; <a class="type" href="../quiche/type.Result.html" title="type quiche::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#2500-2583' title='goto source code'>[src]</a></h4><div class='docblock'><p>Writes data to a stream.</p>
<p>On success the number of bytes written is returned, or <a href="enum.Error.html#variant.Done"><code>Done</code></a> if no
data was written (e.g. because the stream has no capacity).</p>
<p>Note that in order to avoid buffering an infinite amount of data in the
stream's send buffer, streams are only allowed to buffer outgoing data
up to the amount that the peer allows it to send (that is, up to the
stream's outgoing flow control capacity).</p>
<p>This means that the number of written bytes returned can be lower than
the length of the input buffer when the stream doesn't have enough
capacity for the operation to complete. The application should retry the
operation once the stream is reported as writable again.</p>
<h2 id="examples-3" class="section-header"><a href="#examples-3">Examples:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">conn</span>.<span class="ident">stream_send</span>(<span class="ident">stream_id</span>, <span class="string">b&quot;hello&quot;</span>, <span class="bool-val">true</span>)<span class="question-mark">?</span>;</pre></div>
</div><h4 id='method.stream_shutdown' class="method"><code id='stream_shutdown.v'>pub fn <a href='#method.stream_shutdown' class='fnname'>stream_shutdown</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;stream_id: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;direction: <a class="enum" href="../quiche/enum.Shutdown.html" title="enum quiche::Shutdown">Shutdown</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;_err: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a><br>) -&gt; <a class="type" href="../quiche/type.Result.html" title="type quiche::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#2602-2627' title='goto source code'>[src]</a></h4><div class='docblock'><p>Shuts down reading or writing from/to the specified stream.</p>
<p>When the <code>direction</code> argument is set to <a href="enum.Shutdown.html#variant.Read"><code>Shutdown::Read</code></a>, outstanding
data in the stream's receive buffer is dropped, and no additional data
is added to it. Data received after calling this method is still
validated and acked but not stored, and <a href="struct.Connection.html#method.stream_recv"><code>stream_recv()</code></a> will not
return it to the application.</p>
<p>When the <code>direction</code> argument is set to <a href="enum.Shutdown.html#variant.Write"><code>Shutdown::Write</code></a>, outstanding
data in the stream's send buffer is dropped, and no additional data
is added to it. Data passed to <a href="struct.Connection.html#method.stream_send"><code>stream_send()</code></a> after calling this
method will be ignored.</p>
</div><h4 id='method.stream_capacity' class="method"><code id='stream_capacity.v'>pub fn <a href='#method.stream_capacity' class='fnname'>stream_capacity</a>(&amp;self, stream_id: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>) -&gt; <a class="type" href="../quiche/type.Result.html" title="type quiche::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#2630-2637' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns the stream's send capacity in bytes.</p>
</div><h4 id='method.stream_finished' class="method"><code id='stream_finished.v'>pub fn <a href='#method.stream_finished' class='fnname'>stream_finished</a>(&amp;self, stream_id: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2647-2655' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns true if all the data has been read from the specified stream.</p>
<p>This instructs the application that all the data received from the
peer on the stream has been read, and there won't be anymore in the
future.</p>
<p>Basically this returns true when the peer either set the <code>fin</code> flag
for the stream, or sent <code>RESET_STREAM</code>.</p>
</div><h4 id='method.stream_init_application_data' class="method"><code id='stream_init_application_data.v'>pub fn <a href='#method.stream_init_application_data' class='fnname'>stream_init_application_data</a>&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;stream_id: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;data: T<br>) -&gt; <a class="type" href="../quiche/type.Result.html" title="type quiche::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,&nbsp;</span></code><a class='srclink' href='../src/quiche/lib.rs.html#2666-2682' title='goto source code'>[src]</a></h4><div class='docblock'><p>Initializes the stream's application data.</p>
<p>This can be used by applications to store per-stream information without
having to maintain their own stream map.</p>
<p>Stream data can only be initialized once. Additional calls to this
method will return <a href="enum.Error.html#variant.Done"><code>Done</code></a>.</p>
</div><h4 id='method.stream_application_data' class="method"><code id='stream_application_data.v'>pub fn <a href='#method.stream_application_data' class='fnname'>stream_application_data</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;stream_id: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;mut dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#2691-2702' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns the stream's application data, if any was initialized.</p>
<p>This returns a reference to the application data that was initialized
by calling <a href="struct.Connection.html#method.stream_init_application_data"><code>stream_init_application_data()</code></a>.</p>
</div><h4 id='method.readable' class="method"><code id='readable.v'>pub fn <a href='#method.readable' class='fnname'>readable</a>(&amp;self) -&gt; <a class="struct" href="../quiche/struct.StreamIter.html" title="struct quiche::StreamIter">StreamIter</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2728-2730' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns an iterator over streams that have outstanding data to read.</p>
<p>Note that the iterator will only include streams that were readable at
the time the iterator itself was created (i.e. when <code>readable()</code> was
called). To account for newly readable streams, the iterator needs to
be created again.</p>
<h2 id="examples-4" class="section-header"><a href="#examples-4">Examples:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Iterate over readable streams.</span>
<span class="kw">for</span> <span class="ident">stream_id</span> <span class="kw">in</span> <span class="ident">conn</span>.<span class="ident">readable</span>() {
    <span class="comment">// Stream is readable, read until there&#39;s no more data.</span>
    <span class="kw">while</span> <span class="kw">let</span> <span class="prelude-val">Ok</span>((<span class="ident">read</span>, <span class="ident">fin</span>)) <span class="op">=</span> <span class="ident">conn</span>.<span class="ident">stream_recv</span>(<span class="ident">stream_id</span>, <span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">buf</span>) {
        <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Got {} bytes on stream {}&quot;</span>, <span class="ident">read</span>, <span class="ident">stream_id</span>);
    }
}</pre></div>
</div><h4 id='method.writable' class="method"><code id='writable.v'>pub fn <a href='#method.writable' class='fnname'>writable</a>(&amp;self) -&gt; <a class="struct" href="../quiche/struct.StreamIter.html" title="struct quiche::StreamIter">StreamIter</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2761-2769' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns an iterator over streams that can be written to.</p>
<p>A &quot;writable&quot; stream is a stream that has enough flow control capacity to
send data to the peer. To avoid buffering an infinite amount of data,
streams are only allowed to buffer outgoing data up to the amount that
the peer allows to send.</p>
<p>Note that the iterator will only include streams that were writable at
the time the iterator itself was created (i.e. when <code>writable()</code> was
called). To account for newly writable streams, the iterator needs to
be created again.</p>
<h2 id="examples-5" class="section-header"><a href="#examples-5">Examples:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Iterate over writable streams.</span>
<span class="kw">for</span> <span class="ident">stream_id</span> <span class="kw">in</span> <span class="ident">conn</span>.<span class="ident">writable</span>() {
    <span class="comment">// Stream is writable, write some data.</span>
    <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Ok</span>(<span class="ident">written</span>) <span class="op">=</span> <span class="ident">conn</span>.<span class="ident">stream_send</span>(<span class="ident">stream_id</span>, <span class="kw-2">&amp;</span><span class="ident">buf</span>, <span class="bool-val">false</span>) {
        <span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Written {} bytes on stream {}&quot;</span>, <span class="ident">written</span>, <span class="ident">stream_id</span>);
    }
}</pre></div>
</div><h4 id='method.timeout' class="method"><code id='timeout.v'>pub fn <a href='#method.timeout' class='fnname'>timeout</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#2777-2808' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns the amount of time until the next timeout event.</p>
<p>Once the given duration has elapsed, the <a href="struct.Connection.html#method.on_timeout"><code>on_timeout()</code></a> method should
be called. A timeout of <code>None</code> means that the timer should be disarmed.</p>
</div><h4 id='method.on_timeout' class="method"><code id='on_timeout.v'>pub fn <a href='#method.on_timeout' class='fnname'>on_timeout</a>(&amp;mut self)</code><a class='srclink' href='../src/quiche/lib.rs.html#2813-2864' title='goto source code'>[src]</a></h4><div class='docblock'><p>Processes a timeout event.</p>
<p>If no timeout has occurred it does nothing.</p>
</div><h4 id='method.close' class="method"><code id='close.v'>pub fn <a href='#method.close' class='fnname'>close</a>(&amp;mut self, app: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>, err: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, reason: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="type" href="../quiche/type.Result.html" title="type quiche::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#2882-2904' title='goto source code'>[src]</a></h4><div class='docblock'><p>Closes the connection with the given error and reason.</p>
<p>The <code>app</code> parameter specifies whether an application close should be
sent to the peer. Otherwise a normal connection close is sent.</p>
<p>Returns <a href="enum.Error.html#variant.Done"><code>Done</code></a> if the connection had already been closed.</p>
<p>Note that the connection will not be closed immediately. An application
should continue calling <a href="struct.Connection.html#method.recv"><code>recv()</code></a>, <a href="struct.Connection.html#method.send"><code>send()</code></a> and <a href="struct.Connection.html#method.timeout"><code>timeout()</code></a> as
normal, until the <a href="struct.Connection.html#method.is_closed"><code>is_closed()</code></a> method returns <code>true</code>.</p>
</div><h4 id='method.trace_id' class="method"><code id='trace_id.v'>pub fn <a href='#method.trace_id' class='fnname'>trace_id</a>(&amp;self) -&gt; &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2910-2912' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns a string uniquely representing the connection.</p>
<p>This can be used for logging purposes to differentiate between multiple
connections.</p>
</div><h4 id='method.application_proto' class="method"><code id='application_proto.v'>pub fn <a href='#method.application_proto' class='fnname'>application_proto</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2917-2919' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns the negotiated ALPN protocol.</p>
<p>If no protocol has been negotiated, the returned value is empty.</p>
</div><h4 id='method.peer_cert' class="method"><code id='peer_cert.v'>pub fn <a href='#method.peer_cert' class='fnname'>peer_cert</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>&gt;&gt;</code><a class='srclink' href='../src/quiche/lib.rs.html#2922-2924' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns the peer's leaf certificate (if any) as a DER-encoded buffer.</p>
</div><h4 id='method.is_established' class="method"><code id='is_established.v'>pub fn <a href='#method.is_established' class='fnname'>is_established</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2927-2929' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns true if the connection handshake is complete.</p>
</div><h4 id='method.is_resumed' class="method"><code id='is_resumed.v'>pub fn <a href='#method.is_resumed' class='fnname'>is_resumed</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2932-2934' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns true if the connection is resumed.</p>
</div><h4 id='method.is_in_early_data' class="method"><code id='is_in_early_data.v'>pub fn <a href='#method.is_in_early_data' class='fnname'>is_in_early_data</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2938-2940' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns true if the connection has a pending handshake that has
progressed enough to send or receive early data.</p>
</div><h4 id='method.is_closed' class="method"><code id='is_closed.v'>pub fn <a href='#method.is_closed' class='fnname'>is_closed</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2945-2947' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns true if the connection is closed.</p>
<p>If this returns true, the connection object can be dropped.</p>
</div><h4 id='method.stats' class="method"><code id='stats.v'>pub fn <a href='#method.stats' class='fnname'>stats</a>(&amp;self) -&gt; <a class="struct" href="../quiche/struct.Stats.html" title="struct quiche::Stats">Stats</a></code><a class='srclink' href='../src/quiche/lib.rs.html#2950-2959' title='goto source code'>[src]</a></h4><div class='docblock'><p>Collects and returns statistics about the connection.</p>
</div></div><h2 id='synthetic-implementations' class='small-section-header'>Auto Trait Implementations<a href='#synthetic-implementations' class='anchor'></a></h2><div id='synthetic-implementations-list'><h3 id='impl-RefUnwindSafe' class='impl'><code class='in-band'>impl !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="../quiche/struct.Connection.html" title="struct quiche::Connection">Connection</a></code><a href='#impl-RefUnwindSafe' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Send' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../quiche/struct.Connection.html" title="struct quiche::Connection">Connection</a></code><a href='#impl-Send' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Sync' class='impl'><code class='in-band'>impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../quiche/struct.Connection.html" title="struct quiche::Connection">Connection</a></code><a href='#impl-Sync' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Unpin' class='impl'><code class='in-band'>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="../quiche/struct.Connection.html" title="struct quiche::Connection">Connection</a></code><a href='#impl-Unpin' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-UnwindSafe' class='impl'><code class='in-band'>impl !<a class="trait" href="https://doc.rust-lang.org/nightly/std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="../quiche/struct.Connection.html" title="struct quiche::Connection">Connection</a></code><a href='#impl-UnwindSafe' class='anchor'></a></h3><div class='impl-items'></div></div><h2 id='blanket-implementations' class='small-section-header'>Blanket Implementations<a href='#blanket-implementations' class='anchor'></a></h2><div id='blanket-implementations-list'><h3 id='impl-Any' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Any' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/any.rs.html#108-112' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.type_id' class="method hidden"><code id='type_id.v'>fn <a href='https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id' class='fnname'>type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/any.rs.html#109-111' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></div><h3 id='impl-Borrow%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Borrow%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#213-217' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow' class="method hidden"><code id='borrow.v'>fn <a href='https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow' class='fnname'>borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#214-216' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></div><h3 id='impl-BorrowMut%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-BorrowMut%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#220-224' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow_mut' class="method hidden"><code id='borrow_mut.v'>fn <a href='https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut' class='fnname'>borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#221-223' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></div><h3 id='impl-From%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</code><a href='#impl-From%3CT%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#564-568' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.from' class="method hidden"><code id='from.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from' class='fnname'>from</a>(t: T) -&gt; T</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#565-567' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-Into%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-Into%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#553-560' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.into' class="method hidden"><code id='into.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into' class='fnname'>into</a>(self) -&gt; U</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#557-559' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryFrom%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryFrom%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#601-610' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error' class="type"><code id='Error.t'>type <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error' class="type">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_from' class="method hidden"><code id='try_from.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from' class='fnname'>try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#607-609' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryInto%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryInto%3CU%3E' class='anchor'></a><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#587-596' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error-1' class="type"><code id='Error.t-1'>type <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error' class="type">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_into' class="method hidden"><code id='try_into.v'>fn <a href='https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into' class='fnname'>try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#593-595' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "quiche";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>